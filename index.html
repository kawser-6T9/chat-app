<!DOCTYPE html><html lang="bn">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>chat-app ¬©kamrul</title>
  <style>
    body, html {
      margin: 0; padding: 0; height: 100%;
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background: #f5f5f7;
      display: flex; flex-direction: column;
    }
    header {
      background: #2f80ed; color: white;
      padding: 14px 20px;
      display: flex; justify-content: space-between; align-items: center;
      font-size: 20px; font-weight: 600;
    }
    .icons button {
      background: transparent; border: none; color: white;
      font-size: 24px; margin-left: 14px; cursor: pointer;
      transition: transform 0.2s ease;
    }
    .icons button:hover {
      transform: scale(1.2);
    }
    #chatBox {
      flex: 1; padding: 15px; overflow-y: auto;
      display: flex; flex-direction: column; gap: 10px;
      background: #fff;
      border-top: 1px solid #ccc;
      border-bottom: 1px solid #ccc;
    }
    .msg {
      max-width: 80%; padding: 10px 16px;
      border-radius: 15px; font-size: 15px;
      position: relative; word-wrap: break-word;
      box-shadow: 0 1px 2px rgb(0 0 0 / 0.1);
    }
    .msg.me {
      background: #dcf8c6; align-self: flex-end;
    }
    .msg.other {
      background: #fff; border: 1px solid #ccc; align-self: flex-start;
    }
    .name {
      font-weight: 700; font-size: 13px; color: #555; margin-bottom: 4px;
    }
    .replyBox {
      font-size: 13px; color: #555;
      border-left: 3px solid #2f80ed;
      padding-left: 8px; margin-bottom: 5px; cursor: pointer;
    }
    .actions {
      position: absolute; bottom: -22px; right: 10px;
      display: flex; gap: 6px;
      font-size: 13px; color: #666;
      opacity: 0; pointer-events: none;
      transition: opacity 0.2s ease;
    }
    .msg:hover .actions { opacity: 1; pointer-events: auto; }
    .actions button {
      background: transparent; border: none; cursor: pointer;
      padding: 2px 5px; border-radius: 4px;
      transition: background-color 0.2s ease;
    }
    .actions button:hover {
      background-color: #2f80ed; color: white;
    }
    .input-area {
      display: flex; padding: 10px 15px; gap: 8px;
      background: #fff; align-items: center;
      border-top: 1px solid #ccc;
    }
    .input-area input[type="text"] {
      flex: 1; padding: 12px 15px; font-size: 15px;
      border-radius: 20px; border: 1px solid #ccc;
    }
    .input-area button.sendBtn {
      background: #2f80ed; color: white;
      border: none; padding: 12px 18px;
      border-radius: 20px; cursor: pointer;
      font-weight: 600; font-size: 15px;
    }
    .input-area button.sendBtn:hover {
      background: #1c5ecb;
    }
    #fileInput { display: none; }
    .file-label {
      cursor: pointer; font-size: 22px; color: #555;
    }
    .file-label:hover { color: #2f80ed; }
    #nameModal {
      position: fixed; inset: 0;
      background: rgba(0,0,0,0.7);
      display: flex; justify-content: center; align-items: center;
      z-index: 1000;
    }
    #nameModalBox {
      background: white; padding: 30px 20px;
      border-radius: 10px; max-width: 320px; width: 90%;
      text-align: center;
    }
    #nameModalBox input {
      width: 100%; padding: 12px 12px;
      font-size: 16px; border-radius: 6px;
      border: 1px solid #ccc; margin-top: 12px;
    }
    #nameModalBox button {
      margin-top: 18px; background: #2f80ed; color: white;
      border: none; padding: 12px 20px;
      font-size: 16px; border-radius: 6px;
      cursor: pointer; font-weight: 600;
    }
    #replyPreview {
      background: #e3f2fd;
      border-left: 4px solid #2f80ed;
      padding: 6px 12px; margin-bottom: 8px;
      font-size: 14px; color: #2f80ed; display: none;
    }
    .call-msg {
      background: #e0f7fa; padding: 10px;
      border: 1px solid #00acc1; border-radius: 5px;
      text-align: center; margin: 10px;
    }
    .call-msg button {
      margin: 5px; padding: 5px 10px;
      background: #00acc1; color: white;
      border: none; border-radius: 3px;
      cursor: pointer;
    }
  </style>
</head>
<body>
  <div id="call-banner"></div>
  <div id="nameModal">
    <div id="nameModalBox">
      <h2>‡¶§‡ßã‡¶Æ‡¶æ‡¶∞ ‡¶®‡¶æ‡¶Æ ‡¶ì ‡¶™‡¶æ‡¶∏‡¶ì‡¶Ø‡¶º‡¶æ‡¶∞‡ßç‡¶° ‡¶≤‡¶ø‡¶ñ‡ßã</h2>
      <input type="text" id="nameInput" placeholder="‡¶§‡ßã‡¶Æ‡¶æ‡¶∞ ‡¶®‡¶æ‡¶Æ" autocomplete="off" />
      <input type="password" id="passwordInput" placeholder="‡¶™‡¶æ‡¶∏‡¶ì‡¶Ø‡¶º‡¶æ‡¶∞‡ßç‡¶° (ex: chat-app)" autocomplete="off" />
      <button onclick="saveName()">Join Chat</button>
    </div>
  </div>
  <header>
    chat-app ¬©kamrul
    <div class="icons">
      <button title="Audio Call" onclick="startAudioCall()">üìû</button>
      <button title="Video Call" onclick="startVideoCall()">üì∑</button>
      <label for="fileInput" class="file-label" title="Send File">üìé</label>
      <input type="file" id="fileInput" accept="*/*" onchange="sendFile(event)" />
    </div>
  </header>
  <div id="chatBox"></div>
  <div id="replyPreview" onclick="clearReply()"></div>
  <div class="input-area">
    <input type="text" id="messageInput" placeholder="‡¶Æ‡ßá‡¶∏‡ßá‡¶ú ‡¶≤‡¶ø‡¶ñ‡ßã..." autocomplete="off" />
    <button class="sendBtn" onclick="sendMessage()">Send</button>
  </div>
  <audio id="notifSound" src="assets/notification.mp3"></audio>
  <audio id="ringtone" src="assets/ringtone.mp3" loop></audio>
  <!-- Firebase scripts -->
  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-firestore-compat.js"></script>
  <script>
    const firebaseConfig = { /* your firebase config */ };
    firebase.initializeApp(firebaseConfig);
    const db = firebase.firestore();
    let userName = localStorage.getItem("fdUser");
    const nameModal = document.getElementById("nameModal");function saveName() {
  const input = document.getElementById("nameInput").value.trim();
  const pass = document.getElementById("passwordInput").value.trim();
  if (!input || !pass) return alert("‡¶®‡¶æ‡¶Æ ‡¶ì ‡¶™‡¶æ‡¶∏‡¶ì‡¶Ø‡¶º‡¶æ‡¶∞‡ßç‡¶° ‡¶¶‡¶ø‡¶®");
  if (pass !== "skamu") return alert("‡¶≠‡ßÅ‡¶≤ ‡¶™‡¶æ‡¶∏‡¶ì‡¶Ø‡¶º‡¶æ‡¶∞‡ßç‡¶°!");
  userName = input;
  localStorage.setItem("fdUser", userName);
  nameModal.style.display = "none";
  subscribeMessages();
}
if (userName) {
  nameModal.style.display = "none";
  subscribeMessages();
}
// Continue with the rest of your script (sendMessage, appendMessage etc...)

  </script>
</body>
</html>
